<!-- **********************************************************************************************************************************************************
      MAIN CONTENT
      *********************************************************************************************************************************************************** -->
<!-- js placed at the end of  thedocument so the pages load faster -->
<script src="../js/jquery.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../js/jquery.validate.js"></script>
<link href="../css/bootstrap.css" rel="stylesheet">
<link href="../font-awesome/css/font-awesome.css" rel="stylesheet" />
<link rel="stylesheet" type="text/css" href="../css/zabuto_calendar.css">
<link rel="stylesheet" type="text/css" href="../js/gritter/css/jquery.gritter.css" />
<link rel="stylesheet" type="text/css" href="../lineicons/style.css">
<link href="../css/style.css" rel="stylesheet">
<link href="../css/style-responsive.css" rel="stylesheet">
<link href="../css/custom.css" rel="stylesheet">
<script src="../js/chart-master/Chart.js"></script>
<!--BACKSTRETCH-->
<!-- You can use an image of whatever size. This script will stretch to fit in any screen size.-->
<script type="text/javascript" src="js/jquery.backstretch.min.js"></script>
<div id="login-page">
    <div class="container">
        <form class="form-login" id="resetForm" action="/resetPassword" method="POST">
            <h2 class="form-login-heading">Réinitialisez votre mot de passe</h2>
            <div class="login-wrap">
                <% flash.get('error').forEach(function (message) { %>
                    <div style="color:red;">
                        <%= message %>
                    </div>
                    <% }) %>
                        <% flash.get('info').forEach(function (message) { %>
                            <input type="password" name="user[password]" id="user[password]" class="form-control" placeholder="Mot de passe" autofocus>
                            <br>
                            <input type="password" name="user[passwordConfirm]" id="user[passwordConfirm]" class="form-control" placeholder="Mot de passe">
                            <% flash.get('id').forEach(function (message) { %>
                            <input type="hidden" name="user[id]" id="user[id]" class="form-control" placeholder="Id" value=<%= message %>>
                            <% }) %>
                            <button class="btn btn-theme btn-block" href="index.html" type="submit">
                                <i class="fa fa-lock"></i> VALIDER</button>
                            <% }) %>
            </div>
        </form>
    </div>
</div>
<script src="../js/bootstrap.min.js"></script>
 <script class="include" type="text/javascript" src="../js/jquery.dcjqaccordion.2.7.js"></script>
 <script src="../js/jquery.scrollTo.min.js"></script>
 <script src="../js/jquery.nicescroll.js" type="text/javascript"></script>
 <script src="../js/jquery.sparkline.js"></script>
 <script src="../js/common-scripts.js"></script>
 <script type="text/javascript" src="../js/gritter/js/jquery.gritter.js"></script>
 <script type="text/javascript" src="../js/gritter-conf.js"></script>
 <script src="../js/sparkline-chart.js"></script>
 <script src="../js/zabuto_calendar.js"></script>
<script>
    $.backstretch("img/help-bg.jpg", { speed: 500 });
    $.validator.addMethod("samePassword", function (value, element) {
        return $('#user[password]').val() == $('#user[passwordConfirm]').val()
    }, "* Les mots de passes doiventre être les mêmes");
    $('#resetForm').validate({ // initialize the plugin
        rules: {
            'user[password]': {
                required: true,
                minlength: 3
            },
            'user[passwordConfirm]': {
                required: true,
                minlength: 3,
                samePassword: true
            }
        },
        messages: {
            'user[password]': {
                required: 'Veuillez préciser votre nouveau mot de passe',
                minlength: 'Votre nouveau mot de passe doit contenir au moins 3 caractères'
            },
            'user[passwordConfirm]': {
                required: 'Veuillez préciser votre nouveau mot de passe',
                minlength: 'Votre nouveau mot de passe doit contenir au moins 3 caractères',
                samePassword: 'Les deux mots de passe doivent être identiques'
            }
        }
    })
</script>